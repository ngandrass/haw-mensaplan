<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>HAW Mensaplan (Mensa + Caf√©)</title>
        <!-- Base64 favicon -->
        <link rel="shortcut icon"type="image/x-icon" href="data:image/png;base64,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">
        <style>
            body {
                margin: 0px;
                padding: 0px;
                overflow: hidden;
            }

            .plans {
                display: flex;
                width: 100%;
                height: 100vh;
            }

            .plans.horizontal {
                flex-direction: row;
            }

            .plans.vertical {
                flex-direction: column;
            }

            iframe {
                width: 100%;
                height: 100%;
                border: 0px;
            }

            div.menu {
                z-index: 100;
                position: absolute;
                text-align: center;

                background-color: #FFFFFF;
                border: 1px solid #CCCCCC;
                border-top: 0px;
                padding: 5px 10px 5px 10px;
            }

            .menu.top-left {
                top: 0px;
                left: 0px;
            }

            .menu.top-right {
                top: 0px;
                right: 0px;
            }

            div.menu a {
                color: #000000;
                text-decoration: none;
            }

            div.menu a:hover {
                text-decoration: underline;
            }
        </style>
    </head>
    <body>
        <div class="menu top-right">
            <a href="#" id="btnThisWeek" onClick="showThisWeek()">This Week</a>
            &nbsp; | &nbsp;
            <a href="#" id="btnNextWeek" onClick="showNextWeek()">Next Week</a>
        </div>
        <div class="menu top-left">
            <a href="#" id="btnHorizontal" onClick="makeLayoutHorizontal()">Horizontal</a>
            &nbsp; | &nbsp;
            <a href="#" id="btnVertical" onClick="makeLayoutVertical()">Vertical</a>
        </div>
    <div id="plans" class="plans horizontal">
        <iframe id="leftFrame" src="" style="border-right: 1px solid #999999;" sandbox>
            IFrames not supported!
        </iframe>
        <iframe id="rightFrame" src="" sandbox>
            IFrames not supported!
        </iframe>
    </div>
    </body>
    <script>

    /**
     * Calculates current week-number.
     *
     * @return Number of the current Week according to ISO 8601
     */
    Date.prototype.getWeekNumber = function() {
        // Create new date and ignore hours
        var date = new Date(this.getTime());
        date.setHours(0, 0, 0, 0);

        // Thursday in current week decides the year.
        date.setDate(date.getDate() + 3 - (date.getDay() + 6) % 7);
        // January 4 is always in first week.
        var firstWeek = new Date(date.getFullYear(), 0, 4);
        
        // Adjust to Thursday in firstWeek and count number of weeks from date to firstWeek.
        return 1 + Math.round(((date.getTime() - firstWeek.getTime()) / 86400000 - 3 + (firstWeek.getDay() + 6) % 7) / 7);
    }

    /**
     * Adds a week to the Date.
     *
     * @param weeks The number of weeks to add to the current time.
     *
     * @return Date
     */
    Date.prototype.addWeeks = function(weeks) {
       this.setTime(this.getTime() + (weeks * 7 * 24 * 60 * 60 * 1000));
       return this;
    }

    /**
     * Updates the iFrame display to the given week_offset
     *
     * @param week_offset Number of weeks in the future to show the plan for.
     */
    function showWeek(week_offset) {
        let now = new Date();
        now.addWeeks(week_offset);
        document.getElementById("leftFrame").src="http://speiseplan.studierendenwerk-hamburg.de/de/530/" + now.getFullYear() + "/" + now.getWeekNumber() + "/";
        document.getElementById("rightFrame").src="http://speiseplan.studierendenwerk-hamburg.de/de/531/" + now.getFullYear() + "/" + now.getWeekNumber() + "/";
    }

    /**
     * Displays the current weeks plan
     */
    function showThisWeek() {
        document.getElementById("btnThisWeek").style.fontWeight = "bold";
        document.getElementById("btnNextWeek").style.fontWeight = "normal";
        showWeek(0);
    }

    /**
     * Displays the next weeks plan
     */
    function showNextWeek() {
        document.getElementById("btnThisWeek").style.fontWeight = "normal";
        document.getElementById("btnNextWeek").style.fontWeight = "bold";
        showWeek(1);
    }

    /**
     * Changes the layout to horizontal alignment of the plans
     */
    function makeLayoutHorizontal() {
        document.getElementById("btnHorizontal").style.fontWeight = "bold";
        document.getElementById("btnVertical").style.fontWeight = "normal";
        document.getElementById("plans").className="plans horizontal";
    }

    /**
     * Changes the layout to vertical alignment of the plans
     */
    function makeLayoutVertical() {
        document.getElementById("btnHorizontal").style.fontWeight = "normal";
        document.getElementById("btnVertical").style.fontWeight = "bold";
        document.getElementById("plans").className="plans vertical";
    }

    // Start initally with current week
    showThisWeek();

    // Start initally with horizontal layout
    makeLayoutHorizontal();
    </script>
</html>
